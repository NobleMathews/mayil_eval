{
    "id": "pytest-dev__pytest-7352",
    "repo_name": "testbed/pytest-dev__pytest__5.4",
    "task_id": 1497494413924504397,
    "title": "FileNotFoundError: [Errno 2] No such file or directory: '/tmp/pytest-of-jenkins/pytest-1681/.lock'",
    "body": "Same issue as in #4181 .\r\nI think there are still some edge cases where this is not handled correctly. I am running a series of concurrent pytest processes and was able to reproduce the issue. Here is the stack trace:\r\n\r\n```\r\n============================= test session starts ==============================\r\nplatform linux -- Python 3.7.2, pytest-4.6.3, py-1.8.0, pluggy-0.12.0 -- /usr/local/bin/.pyenv/versions/integration-tests/bin/python\r\ncachedir: .pytest_cache\r\nmetadata: {'Python': '3.7.2', 'Platform': 'Linux-4.14.77-70.59.amzn1.x86_64-x86_64-with-debian-9.8', 'Packages': {'pytest': '4.6.3', 'py': '1.8.0', 'pluggy': '0.12.0'}, 'Plugins': {'html': '1.20.0', 'metadata': '1.8.0', 'xdist': '1.29.0', 'forked': '1.0.2', 'datadir': '1.3.0', 'sugar': '0.9.2', 'rerunfailures': '7.0'}, 'BUILD_NUMBER': '189', 'BUILD_ID': '189', 'BUILD_URL': 'https://parallelcluster-jenkins-commercial.aka.corp.amazon.com/job/integration_tests/189/', 'NODE_NAME': 'master', 'JOB_NAME': 'integration_tests', 'BUILD_TAG': 'jenkins-integration_tests-189', 'EXECUTOR_NUMBER': '15', 'JENKINS_URL': 'https://parallelcluster-jenkins-commercial.aka.corp.amazon.com/', 'JAVA_HOME': '/docker-java-home', 'WORKSPACE': '/var/jenkins_home/workspace/integration_tests'}\r\nrootdir: /var/jenkins_home/workspace/integration_tests/pcluster/tests/integration-tests/tests\r\nplugins: html-1.20.0, metadata-1.8.0, xdist-1.29.0, forked-1.0.2, datadir-1.3.0, sugar-0.9.2, rerunfailures-7.0\r\ngw0 I / gw1 I / gw2 I / gw3 I / gw4 I / gw5 I / gw6 I / gw7 I\r\n\r\n[gw0] linux Python 3.7.2 cwd: /var/jenkins_home/workspace/integration_tests/pcluster/tests/integration-tests\r\nINTERNALERROR> Traceback (most recent call last):\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/integration-tests/lib/python3.7/site-packages/_pytest/main.py\", line 204, in wrap_session\r\nINTERNALERROR>     config.hook.pytest_sessionstart(session=session)\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/integration-tests/lib/python3.7/site-packages/pluggy/hooks.py\", line 289, in __call__\r\nINTERNALERROR>     return self._hookexec(self, self.get_hookimpls(), kwargs)\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/integration-tests/lib/python3.7/site-packages/pluggy/manager.py\", line 87, in _hookexec\r\nINTERNALERROR>     return self._inner_hookexec(hook, methods, kwargs)\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/integration-tests/lib/python3.7/site-packages/pluggy/manager.py\", line 81, in <lambda>\r\nINTERNALERROR>     firstresult=hook.spec.opts.get(\"firstresult\") if hook.spec else False,\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/integration-tests/lib/python3.7/site-packages/pluggy/callers.py\", line 208, in _multicall\r\nINTERNALERROR>     return outcome.get_result()\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/integration-tests/lib/python3.7/site-packages/pluggy/callers.py\", line 80, in get_result\r\nINTERNALERROR>     raise ex[1].with_traceback(ex[2])\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/integration-tests/lib/python3.7/site-packages/pluggy/callers.py\", line 187, in _multicall\r\nINTERNALERROR>     res = hook_impl.function(*args)\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/integration-tests/lib/python3.7/site-packages/xdist/dsession.py\", line 81, in pytest_sessionstart\r\nINTERNALERROR>     nodes = self.nodemanager.setup_nodes(putevent=self.queue.put)\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/integration-tests/lib/python3.7/site-packages/xdist/workermanage.py\", line 64, in setup_nodes\r\nINTERNALERROR>     nodes.append(self.setup_node(spec, putevent))\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/integration-tests/lib/python3.7/site-packages/xdist/workermanage.py\", line 73, in setup_node\r\nINTERNALERROR>     node.setup()\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/integration-tests/lib/python3.7/site-packages/xdist/workermanage.py\", line 246, in setup\r\nINTERNALERROR>     basetemp = self.config._tmpdirhandler.getbasetemp()\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/integration-tests/lib/python3.7/site-packages/_pytest/tmpdir.py\", line 118, in getbasetemp\r\nINTERNALERROR>     return py.path.local(self._tmppath_factory.getbasetemp().resolve())\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/integration-tests/lib/python3.7/site-packages/_pytest/tmpdir.py\", line 79, in getbasetemp\r\nINTERNALERROR>     prefix=\"pytest-\", root=rootdir, keep=3, lock_timeout=LOCK_TIMEOUT\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/integration-tests/lib/python3.7/site-packages/_pytest/pathlib.py\", line 267, in make_numbered_dir_with_cleanup\r\nINTERNALERROR>     consider_lock_dead_if_created_before=consider_lock_dead_if_created_before,\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/integration-tests/lib/python3.7/site-packages/_pytest/pathlib.py\", line 246, in cleanup_numbered_dir\r\nINTERNALERROR>     try_cleanup(path, consider_lock_dead_if_created_before)\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/integration-tests/lib/python3.7/site-packages/_pytest/pathlib.py\", line 227, in try_cleanup\r\nINTERNALERROR>     if ensure_deletable(path, consider_lock_dead_if_created_before):\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/integration-tests/lib/python3.7/site-packages/_pytest/pathlib.py\", line 219, in ensure_deletable\r\nINTERNALERROR>     lock.unlink()\r\nINTERNALERROR>   File \"/usr/local/bin/.pyenv/versions/3.7.2/lib/python3.7/pathlib.py\", line 1277, in unlink\r\nINTERNALERROR>     self._accessor.unlink(self)\r\nINTERNALERROR> FileNotFoundError: [Errno 2] No such file or directory: '/tmp/pytest-of-jenkins/pytest-1681/.lock'\r\n```\r\n\r\nA potential mitigation to this problem might be to generate the numbered dir with a random suffix rather than a sequential one, unless some code depends on this logic: https://github.com/pytest-dev/pytest/blob/4.6.3/src/_pytest/pathlib.py#L123\r\n\n",
    "state": "closed",
    "repo_link": "https://github.com/testbed/pytest-dev__pytest__5.4.git",
    "requested_commit": "",
    "mayil_response": "To address the `FileNotFoundError` for the lock file when running concurrent pytest processes, you should:\n\n- Ensure that the lock file creation and deletion logic in `_pytest/tmpdir.py` is thread-safe and can handle concurrent access by multiple pytest processes.\n- Modify the `make_numbered_dir_with_cleanup` function to use a random suffix for temporary directories instead of a sequential one to reduce the chance of collision between concurrent processes.\n- Implement a check in the `cleanup_numbered_dir` and `try_cleanup` functions to handle the case where the lock file might have been deleted by another process, which should prevent the `FileNotFoundError`.\n- Consider using a more robust locking mechanism that can handle concurrency, such as file locks with `fcntl` on Unix or `msvcrt` on Windows, or using a third-party library like `filelock`.\n\n### Code snippets to check\n\n-  \u2192 [src](https://github.com/testbed/pytest-dev__pytest__5.4/tree//src)- [Lines 1 - 10](https://github.com/testbed/pytest-dev__pytest__5.4/blob//src/py.py#L1-L10)\n\n This snippet is not directly relevant to the issue, but it shows the mapping of the 'py' module to '_pytest._py' which could be useful if the issue is related to the 'py' library's path handling.",
    "ai_cost": {
        "search_embedding": 1.3e-07,
        "issue_classifier": 0.0012944999999999999,
        "snippet_processor": 0.0483,
        "issue_star_creation": 0.03987,
        "issue_star_solver": 0.03778,
        "bouncer": 0.03715
    },
    "mayil_collected_data": {
        "status": "completed",
        "start_time": 1711734882.594923,
        "relevant_snippets": [
            {
                "code": "# shim for pylib going away\n# if pylib is installed this file will get skipped\n# (`py/__init__.py` has higher precedence)\nimport sys\n\nimport _pytest._py.error as error\nimport _pytest._py.path as path\n\nsys.modules[\"py.error\"] = error\nsys.modules[\"py.path\"] = path",
                "filename": "src/py.py",
                "start_index": 0,
                "end_index": 262,
                "start_line": 1,
                "end_line": 10,
                "max_line": 10,
                "git_instance": "github",
                "repo_name": "testbed/pytest-dev__pytest__5.4",
                "sha": ""
            },
            {
                "code": "rtd:\n  project: pytest",
                "filename": ".github/config.yml",
                "start_index": 0,
                "end_index": 22,
                "start_line": 1,
                "end_line": 2,
                "max_line": 2,
                "git_instance": "github",
                "repo_name": "testbed/pytest-dev__pytest__5.4",
                "sha": ""
            },
            {
                "code": "import json\nfrom pathlib import Path\n\nimport requests\n\nissues_url = \"https://api.github.com/repos/pytest-dev/pytest/issues\"\n\n\ndef get_issues():\n    issues = []\n    url = issues_url\n    while 1:\n        get_data = {\"state\": \"all\"}\n        r = requests.get(url, params=get_data)\n        data = r.json()\n        if r.status_code == 403:\n            # API request limit exceeded\n            print(data[\"message\"])\n            exit(1)\n        issues.extend(data)\n\n        # Look for next page\n        links = requests.utils.parse_header_links(r.headers[\"Link\"])\n        another_page = False\n        for link in links:\n            if link[\"rel\"] == \"next\":\n                url = link[\"url\"]\n                another_page = True\n        if not another_page:\n            return issues\n\n\ndef main(args):\n    cachefile = Path(args.cache)\n    if not cachefile.exists() or args.refresh:\n        issues = get_issues()\n        cachefile.write_text(json.dumps(issues), \"utf-8\")\n    else:\n        issues = json.loads(cachefile.read_text(\"utf-8\"))\n\n    open_issues = [x for x in issues if x[\"state\"] == \"open\"]\n\n    open_issues.sort(key=lambda x: x[\"number\"])\n    report(open_issues)\n\n\ndef _get_kind(issue):\n    labels = [label[\"name\"] for label in issue[\"labels\"]]\n    for key in (\"bug\", \"enhancement\", \"proposal\"):\n        if key in labels:\n            return key\n    return \"issue\"\n\n\ndef report(issues):\n    for issue in issues:\n        title = issue[\"title\"]\n        # body = issue[\"body\"]\n        kind = _get_kind(issue)\n        status = issue[\"state\"]\n        number = issue[\"number\"]\n        link = \"https://github.com/pytest-dev/pytest/issues/%s/\" % number\n        print(\"----\")\n        print(status, kind, link)\n        print(title)\n        # print()\n        # lines = body.split(\"\\n\")\n        # print(\"\\n\".join(lines[:3]))\n        # if len(lines) > 3 or len(body) > 240:\n        #    print(\"...\")\n    print(\"\\n\\nFound %s open issues\" % len(issues))\n\n\nif __name__ == \"__main__\":\n    import argparse\n\n    parser = argparse.ArgumentParser(\"process bitbucket issues\")\n    parser.add_argument(\n        \"--refresh\", action=\"store_true\", help=\"invalidate cache, refresh issues\"\n    )\n    parser.add_argument(\n        \"--cache\", action=\"store\", default=\"issues.json\", help=\"cache file\"\n    )\n    args = parser.parse_args()\n    main(args)",
                "filename": "extra/get_issues.py",
                "start_index": 0,
                "end_index": 2321,
                "start_line": 1,
                "end_line": 85,
                "max_line": 85,
                "git_instance": "github",
                "repo_name": "testbed/pytest-dev__pytest__5.4",
                "sha": ""
            },
            {
                "code": "blank_issues_enabled: false\ncontact_links:\n  - name: \u2753 Support Question\n    url: https://github.com/pytest-dev/pytest/discussions\n    about: Use GitHub's new Discussions feature for questions",
                "filename": ".github/ISSUE_TEMPLATE/config.yml",
                "start_index": 0,
                "end_index": 191,
                "start_line": 1,
                "end_line": 5,
                "max_line": 5,
                "git_instance": "github",
                "repo_name": "testbed/pytest-dev__pytest__5.4",
                "sha": ""
            },
            {
                "code": "-   repo: local\n    hooks:\n    -   id: rst\n        name: rst\n        entry: rst-lint --encoding utf-8\n        files: ^(RELEASING.rst|README.rst|TIDELIFT.rst)$\n        language: python\n        additional_dependencies: [pygments, restructuredtext_lint]\n    -   id: changelogs-rst\n        name: changelog filenames\n        language: fail\n        entry: 'changelog files must be named ####.(breaking|bugfix|deprecation|doc|feature|improvement|trivial|vendor).rst'\n        exclude: changelog/(\\d+\\.(breaking|bugfix|deprecation|doc|feature|improvement|trivial|vendor).rst|README.rst|_template.rst)\n        files: ^changelog/\n    -   id: py-deprecated\n        name: py library is deprecated\n        language: pygrep\n        entry: >\n            (?x)\\bpy\\.(\n                _code\\.|\n                builtin\\.|\n                code\\.|\n                io\\.|\n                path\\.local\\.sysfind|\n                process\\.|\n                std\\.|\n                error\\.|\n                xml\\.\n            )\n        types: [python]\n    -   id: py-path-deprecated\n        name: py.path usage is deprecated\n        exclude: docs|src/_pytest/deprecated.py|testing/deprecated_test.py|src/_pytest/legacypath.py\n        language: pygrep\n        entry: \\bpy\\.path\\.local\n        types: [python]",
                "filename": ".pre-commit-config.yaml",
                "start_index": 2166,
                "end_index": 3442,
                "start_line": 73,
                "end_line": 108,
                "max_line": 108,
                "git_instance": "github",
                "repo_name": "testbed/pytest-dev__pytest__5.4",
                "sha": ""
            },
            {
                "code": "import pytest\n\n\n@pytest.fixture(scope=\"module\", params=range(966))\ndef foo(request):\n    return request.param\n\n\ndef test_it(foo):\n    pass\n\n\ndef test_it2(foo):\n    pass",
                "filename": "bench/manyparam.py",
                "start_index": 0,
                "end_index": 168,
                "start_line": 1,
                "end_line": 14,
                "max_line": 14,
                "git_instance": "github",
                "repo_name": "testbed/pytest-dev__pytest__5.4",
                "sha": ""
            },
            {
                "code": "version: 2\nupdates:\n- package-ecosystem: pip\n  directory: \"/testing/plugins_integration\"\n  schedule:\n    interval: weekly\n    time: \"03:00\"\n  open-pull-requests-limit: 10\n  allow:\n  - dependency-type: direct\n  - dependency-type: indirect\n- package-ecosystem: github-actions\n  directory: /\n  schedule:\n    interval: weekly\n    time: \"03:00\"\n  open-pull-requests-limit: 10",
                "filename": ".github/dependabot.yml",
                "start_index": 0,
                "end_index": 370,
                "start_line": 1,
                "end_line": 17,
                "max_line": 17,
                "git_instance": "github",
                "repo_name": "testbed/pytest-dev__pytest__5.4",
                "sha": ""
            },
            {
                "code": "import datetime\nimport pathlib\nimport re\nfrom textwrap import dedent\nfrom textwrap import indent\n\nimport packaging.version\nimport platformdirs\nimport tabulate\nimport wcwidth\nfrom requests_cache import CachedResponse\nfrom requests_cache import CachedSession\nfrom requests_cache import OriginalResponse\nfrom requests_cache import SQLiteCache\nfrom tqdm import tqdm\n\n\nFILE_HEAD = r\"\"\"\n.. Note this file is autogenerated by scripts/update-plugin-list.py - usually weekly via github action\n\n.. _plugin-list:\n\nPlugin List\n===========\n\nPyPI projects that match \"pytest-\\*\" are considered plugins and are listed\nautomatically together with a manually-maintained list in `the source\ncode <https://github.com/pytest-dev/pytest/blob/main/scripts/update-plugin-list.py>`_.\nPackages classified as inactive are excluded.\n\n.. The following conditional uses a different format for this list when\n   creating a PDF, because otherwise the table gets far too wide for the\n   page.\n\n\"\"\"\nDEVELOPMENT_STATUS_CLASSIFIERS = (\n    \"Development Status :: 1 - Planning\",\n    \"Development Status :: 2 - Pre-Alpha\",\n    \"Development Status :: 3 - Alpha\",\n    \"Development Status :: 4 - Beta\",\n    \"Development Status :: 5 - Production/Stable\",\n    \"Development Status :: 6 - Mature\",\n    \"Development Status :: 7 - Inactive\",\n)\nADDITIONAL_PROJECTS = {  # set of additional projects to consider as plugins\n    \"logassert\",\n    \"nuts\",\n}\n\n\ndef escape_rst(text: str) -> str:\n    \"\"\"Rudimentary attempt to escape special RST characters to appear as\n    plain text.\"\"\"\n    text = (\n        text.replace(\"*\", \"\\\\*\")\n        .replace(\"<\", \"\\\\<\")\n        .replace(\">\", \"\\\\>\")\n        .replace(\"`\", \"\\\\`\")\n    )\n    text = re.sub(r\"_\\b\", \"\", text)\n    return text\n\n\ndef project_response_with_refresh(\n    session: CachedSession, name: str, last_serial: int\n) -> OriginalResponse | CachedResponse:\n    \"\"\"Get a http cached pypi project\n\n    force refresh in case of last serial mismatch\n    \"\"\"\n\n    response = session.get(f\"https://pypi.org/pypi/{name}/json\")\n    if int(response.headers.get(\"X-PyPI-Last-Serial\", -1)) != last_serial:\n        response = session.get(f\"https://pypi.org/pypi/{name}/json\", refresh=True)\n    return response\n\n\ndef get_session() -> CachedSession:\n    \"\"\"Configures the requests-cache session\"\"\"\n    cache_path = platformdirs.user_cache_path(\"pytest-plugin-list\")\n    cache_path.mkdir(exist_ok=True, parents=True)\n    cache_file = cache_path.joinpath(\"http_cache.sqlite3\")\n    return CachedSession(backend=SQLiteCache(cache_file))\n\n\ndef pytest_plugin_projects_from_pypi(session: CachedSession) -> dict[str, int]:\n    response = session.get(\n        \"https://pypi.org/simple\",\n        headers={\"Accept\": \"application/vnd.pypi.simple.v1+json\"},\n        refresh=True,\n    )\n    return {\n        name: p[\"_last-serial\"]\n        for p in response.json()[\"projects\"]\n        if (name := p[\"name\"]).startswith(\"pytest-\") or name in ADDITIONAL_PROJECTS\n    }",
                "filename": "scripts/update-plugin-list.py",
                "start_index": 0,
                "end_index": 2939,
                "start_line": 1,
                "end_line": 155,
                "max_line": 195,
                "git_instance": "github",
                "repo_name": "testbed/pytest-dev__pytest__5.4",
                "sha": ""
            },
            {
                "code": "import pytest\n\nSKIP = True\n\n\n@pytest.mark.parametrize(\"x\", range(5000))\ndef test_foo(x):\n    if SKIP:\n        pytest.skip(\"heh\")",
                "filename": "bench/skip.py",
                "start_index": 0,
                "end_index": 128,
                "start_line": 1,
                "end_line": 9,
                "max_line": 9,
                "git_instance": "github",
                "repo_name": "testbed/pytest-dev__pytest__5.4",
                "sha": ""
            },
            {
                "code": "import sys\n\nif __name__ == \"__main__\":\n    import cProfile\n    import pytest  # NOQA\n    import pstats\n\n    script = sys.argv[1:] if len(sys.argv) > 1 else [\"empty.py\"]\n    cProfile.run(\"pytest.cmdline.main(%r)\" % script, \"prof\")\n    p = pstats.Stats(\"prof\")\n    p.strip_dirs()\n    p.sort_stats(\"cumulative\")\n    print(p.print_stats(500))",
                "filename": "bench/bench.py",
                "start_index": 0,
                "end_index": 338,
                "start_line": 1,
                "end_line": 13,
                "max_line": 13,
                "git_instance": "github",
                "repo_name": "testbed/pytest-dev__pytest__5.4",
                "sha": ""
            }
        ],
        "classification": "bug",
        "snippet_processor_task": {
            "src/py.py": [
                {
                    "chunk": {
                        "code": "# shim for pylib going away\n# if pylib is installed this file will get skipped\n# (`py/__init__.py` has higher precedence)\nimport sys\n\nimport _pytest._py.error as error\nimport _pytest._py.path as path\n\nsys.modules[\"py.error\"] = error\nsys.modules[\"py.path\"] = path",
                        "filename": "src/py.py",
                        "start_index": 0,
                        "end_index": 262,
                        "start_line": 1,
                        "end_line": 10,
                        "max_line": 10,
                        "git_instance": "github",
                        "repo_name": "testbed/pytest-dev__pytest__5.4",
                        "sha": ""
                    },
                    "reason_for_relevance": "This snippet is not directly relevant to the issue, but it shows the mapping of the 'py' module to '_pytest._py' which could be useful if the issue is related to the 'py' library's path handling."
                }
            ]
        },
        "solution_task": "To address the `FileNotFoundError` for the lock file when running concurrent pytest processes, you should:\n\n- Ensure that the lock file creation and deletion logic in `_pytest/tmpdir.py` is thread-safe and can handle concurrent access by multiple pytest processes.\n- Modify the `make_numbered_dir_with_cleanup` function to use a random suffix for temporary directories instead of a sequential one to reduce the chance of collision between concurrent processes.\n- Implement a check in the `cleanup_numbered_dir` and `try_cleanup` functions to handle the case where the lock file might have been deleted by another process, which should prevent the `FileNotFoundError`.\n- Consider using a more robust locking mechanism that can handle concurrency, such as file locks with `fcntl` on Unix or `msvcrt` on Windows, or using a third-party library like `filelock`.",
        "bouncer_response": {
            "score": 7,
            "criteria": "The RESPONSE offers clear and comprehensive guidance or solutions for the described bug.",
            "supporting_evidence": "The RESPONSE provides several actionable recommendations to address the concurrency issue with the lock file in pytest. It suggests ensuring thread-safe logic for lock file creation and deletion, modifying the directory naming to use a random suffix, implementing checks for the case where the lock file is deleted by another process, and considering a more robust locking mechanism. These suggestions are relevant and could potentially resolve the concurrency issue described in the PROMPT. However, the RESPONSE includes a code snippet reference that is not directly relevant to the issue, which does not add value to the solution and could potentially confuse the implementation of the fix.",
            "clarification_questions": "NONE"
        },
        "end_time": 1711735024.40741,
        "result": "To address the `FileNotFoundError` for the lock file when running concurrent pytest processes, you should:\n\n- Ensure that the lock file creation and deletion logic in `_pytest/tmpdir.py` is thread-safe and can handle concurrent access by multiple pytest processes.\n- Modify the `make_numbered_dir_with_cleanup` function to use a random suffix for temporary directories instead of a sequential one to reduce the chance of collision between concurrent processes.\n- Implement a check in the `cleanup_numbered_dir` and `try_cleanup` functions to handle the case where the lock file might have been deleted by another process, which should prevent the `FileNotFoundError`.\n- Consider using a more robust locking mechanism that can handle concurrency, such as file locks with `fcntl` on Unix or `msvcrt` on Windows, or using a third-party library like `filelock`.\n\n### Code snippets to check\n\n-  \u2192 [src](https://github.com/testbed/pytest-dev__pytest__5.4/tree//src)- [Lines 1 - 10](https://github.com/testbed/pytest-dev__pytest__5.4/blob//src/py.py#L1-L10)\n\n This snippet is not directly relevant to the issue, but it shows the mapping of the 'py' module to '_pytest._py' which could be useful if the issue is related to the 'py' library's path handling."
    }
}